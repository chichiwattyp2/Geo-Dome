<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/aframe/dist/aframe-master.min.js"></script>
    <script src="bower_components/moment/min/moment-with-locales.min.js"></script>
    <script src="bower_components/howler/dist/howler.min.js"></script>
    <script src="bower_components/leaflet/dist/leaflet.js"></script>
    <script src="bower_components/leaflet-providers/leaflet-providers.js"></script>
    <script src="bower_components/html2canvas/build/html2canvas.min.js"></script>
    <script src="bower_components/leaflet-image/leaflet-image.js"></script>

    <link rel="stylesheet" href="bower_components/leaflet/dist/leaflet.css">

    <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>


    <script src="bower_components/d3/d3.min.js"></script>

    <script src="bower_components/tabletop/src/tabletop.min.js"></script>

    <script src="js/components/ui/constants.js"></script>
    <script src="js/components/ui/button.js"></script>
    <script src="js/components/ui/mediacontrols.js"></script>
    <script src="js/components/ui/menu.js"></script>
    <script src="js/components/ui/textbutton.js"></script>
    <script src="js/components/ui/mediapanel.js"></script>
    <script src="js/components/common.js"></script>

    <script src="js/components/isotypes-radial-viz.js"></script>
    <script src="js/components/geo-viz.js"></script>
    <script src="js/components/tilemap-viz.js"></script>
    <script src="js/components/timeline-viz.js"></script>
    <script src="js/components/treemap-viz.js"></script>
    <script src="js/components/photogrid-viz.js"></script>
    <script src="js/components/photo-viz.js"></script>
    <script src="js/components/video-viz.js"></script>
    <script src="js/components/GSVPano.js"></script>
    <script src="js/components/aframe-stereo-component-mod.js"></script>
    <script src="js/components/intro-panel.js"></script>

    <script src="js/renderer.js"></script>
    <script src="js/app.js"></script>
    <script src="js/constants.js"></script>
    <script src="js/state.js"></script>
    <script src="js/tests.js"></script>
    <script src="js/urls.js"></script>
    <script src="js/themes.js"></script>

    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>


  </head>

  <body style="background-color: black">

      <a-scene>
          <a-assets></a-assets>
          <a-sky color="grey"></a-sky>

          <a-camera dataverse-added>
              <a-cursor color="yellow"></a-cursor>
              <!--<a-cursor dataverse-added color="yellow" raycaster="near: 0.0; objects: .clickable" fuse="true" fuse-timeout="1000"></a-cursor>-->
          </a-camera>


      </a-scene>

        <script>

            // This is to force reload on 'artificially inserted' history entries...

            window.onpopstate = function(event) {
                if(event && event.state) {
                    location.reload();
                }
            };

            UIPACK_CONSTANTS.icon_path = "themes/dark/icons/";


//            var intro = document.createElement("a-entity");
//
//            intro.setAttribute("uipack-mediapanel", {credits: "Story: djhdjhd, mandanga: ueieueieuieue, design: jkdjekdjed, developer: jdkdjkdj", title: "If the world were 100 people", theme: "dark",text: "Lorem ipsum dolor sit amet consectetur adipiscing elit donec dictum augue magna cubilia, urna risus morbi mollis viverra mattis facilisi imperdiet suspendisse blandit habitant."});
//
//            var scene = document.querySelector("a-scene");
//
//            scene.appendChild(intro);
//
//
//            console.log("COMPONENTS", intro.components['intro-panel']);
//
//            setTimeout(function(){ console.log("PUTTING LOADED MESSAGE"); intro.components['intro-panel'].loaded(); }, 10000);

                self.media_panel = document.createElement("a-entity");

                var scene = document.querySelector("a-scene");

                var cam_position = scene.camera.el.getAttribute("position");

                self.media_panel.setAttribute("position", {
                    x: cam_position.x,
                    y: cam_position.y,
                    z: cam_position.z
                });

                // cam yaw rotation

                var yaw = (scene.camera.el.getAttribute("rotation").y) % 360;
                var pitch = (scene.camera.el.getAttribute("rotation").x) % 360;


                self.media_panel.setAttribute("uipack-mediapanel", {
                    yaw: yaw,
                    pitch: pitch,
                    theme: "light",
                    distance: 1.5,
                    title: "Title Title Title Title",
                    subtitle: "Subtitle",
                    text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",
                    media_url: "media/videos/AshesToAshes.mp4",
                    media_caption: "Media caption",
                    media_credit: "Media credit",
                    link: "",
                    link_thumbnail: "",
                    link_type: "",
                    id: "cartela-text"
                });


                scene.appendChild(self.media_panel);






//            UIPACK_CONSTANTS.icon_path = "http://www.pedro.com";

            // World 100

//            var main = new DATAVERSE.main({'debug': false, 'source': "https://docs.google.com/spreadsheets/d/13QLqRWDrg5EC2q-zWZW4svLlb5RzvzTqRnVOdbytu5c/edit?usp=sharing"});

            // All vizs example

//            var main = new DATAVERSE.main({'debug': false, 'source': "https://docs.google.com/spreadsheets/d/1z2WYbw5ANUJxGVaXQ0POs24Kr5baYmH3sv3TRkm2BEY/edit?usp=sharing"});

        </script>
  </body>

</html>
